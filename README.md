# tasm-lib

This repository contains a collection of functions written in Triton VM assembly (tasm).

There are two big projects to be written in tasm:
 - The consensus logic of [Neptune](https://neptune.cash/)
 - The recursive Triton VM STARK verifier (recufier)

This repository helps get an overview of the run times of the consensus code and the recufier code.

Please place code in the appropriate directories, or create them if non-existent.

## Conventions
### U64
A `u64` type is stored on the stack as two `u32` elements that Triton VM provides native support for. A `u64` is stored with the least significant part on top of the stack and the most significant part below it. So if the least significant part is `st0`, then the most significant part is stored in `st1`.

### Authentication Paths from Secret In
1st element is a length indicator that specifies the authentication path length in number of digests. The length indicator must be a valid `u32`. Then follows the digests. The digests are ordered as: `[digest_0_element_4,digest_0_element_3, digest_0_element_2, digest_0_element_1, digest_0_element_0, digest_1_element_4, digest_1_element_3 ... ]`.

If the length of the authentication path is not needed for the algorithem, i.e. its clear from the context, then the length indicator can be dropped to save a few cycles in the runtime.

## Runtimes

Runtimes are printed in the JSON files in the `benchmarks` directory. These are generated by tests labeled as `benchmark`. If you manage to lower any of the numbers by changing a TASM snippet, please
make a pull request, so we can get more efficient algorithms :)